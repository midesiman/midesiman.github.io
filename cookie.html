<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <style media="screen">
      img{width:300px;}
      .container{display:flex;}
      .item1{flex-grow:2;
             background-image: url("bgBlue.jpg");
             height: 100vh;}
      .item2{flex-grow:4;
             background-color: green;}
      .item3{flex-grow:3;
             background-color: red;}
    </style>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">
     /*インターバルIDを控える配列*/
     let event_ids = [];

     /*クッキーのカウント*/

      grandma_count = 0;
      farm_count = 0;
      kami_count = 0;
      yabaikami_count = 0;

      let ls_count = localStorage.getItem("ls_count");
      if (ls_count){
        count = parseInt(ls_count);
      }else{
        count = 0;
      }

      setInterval(save_action,1000);
      function save_action() {
        localStorage.setItem("ls_count",count);

      }

      /*画面更新処理*/
      setInterval(screen_update,10);
      function screen_update(){
        span =document.getElementById('cookie_count');
        span.textContent = count;
      }

      function cookie_click() {
        count++;
        var cookie_img = document.getElementById('cookie_img');
        cookie_img.classList.remove('animate__animated','animate__bounce');
        void cookie_img.offsetWidth;
        cookie_img.classList.add('animate__animated','animate__bounce');
      }

      function gradma() {
        if(count >= 10){
          count = count - 20;
          grandma_count++;
          let r_id = setInterval(autoCountUp,1000,1);
          event_ids.push(r_id);
        }
      }
      function sell_gradma(){
        let r_id = event_ids.pop();
        clearInterval(r_id);
      }

      function farm() {
        if(count >= 50){
          count = count - 50;
          farm_count++;
          setInterval(autoCountUp,1000,3);
        }
      }
      function kami() {
        if(count >= 99999){
          count = count - 9999;
          kami_count++;
          setInterval(autoCountUp,800,);
        }
      }
      function yabaikami() {
        if(count >= 1234567890123){
          count = count - 123456789;
          yabaikami_count++;
          setInterval(autoCountUp,1000,12345);
        }
      }

      function autoCountUp(num) {
        count = count + num;
      }


      function buildSwitch(){
        let target_element =document.getElementById('buildings_buy');
        target_element.style.display="none";
      }
    </script>
    <div class="container">
      <div class="item1">
      <p class="animate__animated animate__bounce">
        <span id="cookie_count">0</span>枚
      </p>
      <img id="cookie_img" onclick="cookie_click()" src="クッキー.jpg" alt="">
    </div>
    <div class="item2">
      製作途中
    </div>
    <div class="item3">
      <div id="buildings_buy">
      <span onclick="buildSwitch()">購入</span>
      <ul>
        <li onclick="gradma()">グラン魔 20枚必要</li>
        <li onclick="farm()">ファーム　50枚必要</li>
        <li onclick="kami()">神　9999枚必要</li>
        <li onclick="yabaikami()">ヤバい神　123456789枚必要</li>
      </ul>
    </div>

    <div id="buildings_sell">
      売却
      <ul>
        <li onclick="sell_gradma()">グラン魔 20枚必要</li>
        <li onclick="sell_farm()">ファーム　50枚必要</li>
        <li onclick="sell_kami()">神　9999枚必要</li>
        <li onclick="sell_yabaikami()">ヤバい神　123456789枚必要</li>
      </ul>
    </div>

    </div>
   </div>
  </body>
</html>
